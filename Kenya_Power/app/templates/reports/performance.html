{% extends "base.html" %}

{% block title %}Performance Dashboard - Kenya Power{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h4 class="mb-0">System Performance Dashboard</h4>
  <a href="{{ url_for('reports.index') }}" class="btn btn-outline-secondary">
    <i class="bi bi-arrow-left"></i> Back to Reports
  </a>
</div>

<!-- Key Metrics -->
<div class="row g-4 mb-4">
  <div class="col-md-3">
    <div class="card stat-card bg-primary text-white">
      <div class="card-body text-center">
        <i class="bi bi-people" style="font-size: 2rem;"></i>
        <div class="stat-value">{{ stats.total_customers }}</div>
        <div class="stat-label text-white-50">Total Customers</div>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card stat-card bg-success text-white">
      <div class="card-body text-center">
        <i class="bi bi-plug" style="font-size: 2rem;"></i>
        <div class="stat-value">{{ stats.active_connections }}</div>
        <div class="stat-label text-white-50">Active Connections</div>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card stat-card bg-warning text-dark">
      <div class="card-body text-center">
        <i class="bi bi-pause-circle" style="font-size: 2rem;"></i>
        <div class="stat-value">{{ stats.suspended_connections }}</div>
        <div class="stat-label">Suspended</div>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card stat-card bg-info text-white">
      <div class="card-body text-center">
        <i class="bi bi-check-circle" style="font-size: 2rem;"></i>
        <div class="stat-value">{{ stats.resolution_rate }}%</div>
        <div class="stat-label text-white-50">Resolution Rate</div>
      </div>
    </div>
  </div>
</div>

<!-- Monthly Stats -->
<div class="row g-4">
  <div class="col-md-6">
    <div class="card h-100">
      <div class="card-header">Monthly Fault Statistics</div>
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span>Total Faults (30 days)</span>
          <span class="badge bg-danger fs-6">{{ stats.total_faults_month }}</span>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span>Resolved Faults</span>
          <span class="badge bg-success fs-6">{{ stats.resolved_faults_month }}</span>
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <span>Resolution Rate</span>
          <div class="progress w-50" style="height: 20px;">
            <div class="progress-bar bg-success" style="width: {{ stats.resolution_rate }}%;">{{ stats.resolution_rate }}%</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card h-100">
      <div class="card-header">Monthly Maintenance Statistics</div>
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span>Completed Tasks (30 days)</span>
          <span class="badge bg-success fs-6">{{ stats.maintenance_completed_month }}</span>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span>Pending Service Requests</span>
          <span class="badge bg-warning fs-6">{{ stats.pending_requests }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}