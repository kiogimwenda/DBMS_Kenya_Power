{% extends "base.html" %}

{% block title %}Register - Kenya Power{% endblock %}

{% block public_content %}
<div class="login-page">
  <div class="card login-card" style="max-width: 500px;">
    <div class="login-header">
      <i class="bi bi-lightning-charge-fill text-primary" style="font-size: 3rem;"></i>
      <h4 class="mt-2 mb-0">Create Account</h4>
      <p class="text-muted">Kenya Power Management System</p>
    </div>
    <div class="card-body p-4">
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      {% for category, message in messages %}
      <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
      {% endfor %}
      {% endif %}
      {% endwith %}

      <form method="POST" action="{{ url_for('auth.register') }}">
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">Username</label>
              <input type="text" class="form-control" name="username" required>
            </div>
          </div>
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">Full Name</label>
              <input type="text" class="form-control" name="full_name" required>
            </div>
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label">Email</label>
          <input type="email" class="form-control" name="email" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Phone</label>
          <input type="tel" class="form-control" name="phone" placeholder="+254...">
        </div>
        <div class="mb-3">
          <label class="form-label">Password</label>
          <input type="password" class="form-control" name="password" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Role</label>
          <select class="form-select" name="role">
            <option value="customer_service">Customer Service Agent</option>
            <option value="technician">Field Technician</option>
            <option value="manager">Manager</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary w-100 mb-3">
          <i class="bi bi-person-plus"></i> Register
        </button>
        <div class="text-center">
          <a href="{{ url_for('auth.login') }}">Already have an account? Login</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}